<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë‚´ AI ì±„íŒ…ë´‡</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; }
        #chat-box { border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px; margin-bottom: 10px; background: #f9f9f9; }
        .user { color: blue; font-weight: bold; }
        .ai { color: green; margin-bottom: 10px; }
        #loading { display: none; color: gray; }
    </style>
</head>
<body>
    <h2>ğŸ¤– ë‚˜ë§Œì˜ Gemini AI ì±„íŒ…</h2>
    <div id="chat-box"></div>
    <div id="loading">AIê°€ ìƒê° ì¤‘ì…ë‹ˆë‹¤...</div>
    <input type="text" id="user-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." style="width: 80%; padding: 10px;">
    <button onclick="askAI()" style="padding: 10px;">ì „ì†¡</button>

    <script>
        async function askAI() {
            const input = document.getElementById('user-input');
            const chatBox = document.getElementById('chat-box');
            const loading = document.getElementById('loading');
            const prompt = input.value;

            if (!prompt) return;

            // ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ
            chatBox.innerHTML += `<div class="user">ë‚˜: ${prompt}</div>`;
            input.value = '';
            loading.style.display = 'block';

            try {
                // Vercel API í˜¸ì¶œ
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt })
                });

                const data = await response.text();
                
                // AI ë‹µë³€ í‘œì‹œ
                chatBox.innerHTML += `<div class="ai">AI: ${data}</div>`;
            } catch (error) {
                chatBox.innerHTML += `<div class="ai" style="color:red;">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>`;
            } finally {
                loading.style.display = 'none';
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        }

        // ì—”í„°í‚¤ ì§€ì›
        document.getElementById('user-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') askAI();
        });
    </script>
</body>
</html>
